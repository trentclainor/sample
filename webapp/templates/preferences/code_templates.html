{% extends "base.html" %}
{% block scripts %}
    {% if current_user.is_admin() %}
        {% include 'helpers/modal_dialog_confirm_delete.html' %}
    {% endif %}
{% endblock %}
{% block content %}
{% if form %}
    {% from "helpers/form.html" import render_form %}
    {{ render_form(form, method='get', action=url_for('preferences.code_templates')) }}
{% endif %}
{% if code_templates.items %}
{% from "helpers/pagination.html" import render_pagination %}
{{ render_pagination(code_templates) }}
<table class="table table-hover table-condensed table-striped table-nonfluid">
    <thead>
        <tr>
            <th></th>
            <th><small>ID</small></th>
            <th><small>Название</small></th>
            <th><small>Шаблон кода</small></th>
            <th><small>Шаблон статической части</small></th>
        </tr>
    </thead>
    <tbody>
    {% for code_template in code_templates.items %}
        <tr>
            <td>
                <div class="btn-group btn-group-xs row-xs-flex">
                    <button class="status btn btn-default" type="button" data-toggle="dropdown">{{ _('Управление') }}</button>
                    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                        <span class="caret"></span>
                        <span class="sr-only">Toggle Dropdown</span>
                    </button>
                    <ul class="dropdown-menu" role="menu">
                        <li><a href="{{ url_for_next('preferences.code_templates.edit', id=code_template.get_id()) }}"><small class="text-muted"><span class="glyphicon glyphicon-edit"></span> {{ _('Редактировать') }}</small></a></li>
                        {% if current_user.is_admin() %}
                        <li><a href="{{ url_for_next('preferences.code_templates.delete', id=code_template.get_id()) }}" class="deleteModal" data-confirm="{{ _('Вы уверены что хотите удалить шаблон') }} {{ code_template.name }}?"><small class="text-danger"><span class="glyphicon glyphicon-remove"></span> {{ _('Удалить') }}</small></a></li>
                        {% endif %}
                    </ul>
                </div>
            </td>
            <td><small>{{ code_template.get_id() }}</small></td>
            <td><small>{{ code_template.name }}</small></td>
            <td><small>{{ code_template.template }}</small></td>
            <td><small>{{ code_template.template_static }}</small></td>
        </tr>
    {% endfor %}
    </tbody>
</table>
{% from "helpers/pagination.html" import render_pagination %}
{{ render_pagination(code_templates) }}
{% else %}
<table class="table table-hover">
    <tbody>
        <tr>
            <td>По вашему запросу ничего не найдено</td>
        </tr>
    </tbody>
</table>
{% endif %}
<a class="btn btn-primary btn-sm pull-right" href="{{ url_for('preferences.code_templates.create') }}">{{ _('Добавить шаблон') }}</a>
{% endblock %}